function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},i=o.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in s){var t=s[e];delete s[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){s[e]=t},o.parcelRequired7c6=i),i.register("kyEFX",(function(t,o){var n,s;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return s}),(function(e){return s=e}));var i={};n=function(e){for(var t=Object.keys(e),o=0;o<t.length;o++)i[t[o]]=e[t[o]]},s=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("kyEFX").register(JSON.parse('{"5ZPII":"index.327130df.js","8bXqy":"alternative-book.ed914283.png","lp5u4":"sprite.4fd37ecc.svg","jCYVU":"amazon.626c9508.png","dm81U":"amazon@2x.104a65be.png","h2fYN":"apple.652b354e.png","4EHhF":"apple@2x.15632d7d.png","kptGM":"bookShop.920db583.png","5UbS1":"index.af091c3d.css"}'));const r=document.querySelector("body"),a=document.querySelector("#switcher"),l=localStorage.getItem("THEME");a.addEventListener("change",(()=>{localStorage.setItem("THEME",!0===a.checked?"dark":"light"),r.classList.toggle("dark-theme")})),"light"===l?a.checked=!1:"dark"===l&&(a.checked=!0,r.classList.toggle("dark-theme"));const c=document.querySelector("[data-mobile-menu-btn]"),d=document.querySelector("[data-mobile-menu]"),u=document.querySelector("body");c.addEventListener("click",(function(){c.classList.toggle("is-open"),d.classList.toggle("is-open"),u.classList.toggle("mobile-menu-open")})),function(){const e=document.querySelectorAll(".navigation-link"),t=window.location.href;e.forEach((e=>{e.href===t&&e.classList.add("active")}))}();const f=document.querySelector(".foundations-list"),m=document.querySelector(".foundations-more");let g=window.innerWidth<768?4:6,b=0;function h(e,t){for(let e=0;e<f.children.length;e++)f.children[e].classList.add("hidden");for(let o=e;o<e+t;o++){const e=f.children[o];if(e){e.classList.remove("hidden");let t=e.querySelector("span");t||(t=document.createElement("span"),e.insertBefore(t,e.firstChild)),t.classList.add("foundation-counter"),t.textContent="0"+(o+1)}}e+t-1>=f.children.length-1?m.classList.add("up"):m.classList.remove("up");const o=document.querySelectorAll(".foundation.visible");o.forEach(((e,t)=>{setTimeout((()=>{e.style.opacity="0",e.style.pointerEvents="none"}),50*t)})),setTimeout((()=>{for(let o=e;o<e+t;o++){const e=f.children[o];e&&(e.classList.add("visible"),e.style.opacity="1",e.style.pointerEvents="auto")}}),50*o.length)}h(b,g),m.addEventListener("click",(function(){b+=g,b>=f.children.length&&(b=0),h(b,g)}));class p{getCategoriesList(){return fetch("https://books-backend.p.goit.global/books/category-list").then((e=>e.json()))}getCategoriesTop(){return fetch("https://books-backend.p.goit.global/books/top-books").then((e=>e.json()))}getCategoriesSelected(e){return fetch(`https://books-backend.p.goit.global/books/category?category=${e}`).then((e=>e.json()))}getBookId(e){return fetch(`https://books-backend.p.goit.global/books/${e}`).then((e=>e.json()))}constructor(){}}var v={};v=function e(t,o,n){function s(r,a){if(!o[r]){if(!t[r]){var l=void 0;if(!a&&l)return l(r,!0);if(i)return i(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=o[r]={exports:{}};t[r][0].call(d.exports,(function(e){return s(t[r][1][e]||e)}),d,d.exports,e,t,o,n)}return o[r].exports}for(var i=void 0,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.create=o.visible=void 0;var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=document.createElement("div");return o.innerHTML=e.trim(),!0===t?o.children:o.firstChild},s=function(e,t){var o=e.children;return 1===o.length&&o[0].tagName===t},i=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};o.visible=i,o.create=function(e,t){var o=function(e,t){var o=n('\n\t\t<div class="basicLightbox '.concat(t.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),i=o.querySelector(".basicLightbox__placeholder");e.forEach((function(e){return i.appendChild(e)}));var r=s(i,"IMG"),a=s(i,"VIDEO"),l=s(i,"IFRAME");return!0===r&&o.classList.add("basicLightbox--img"),!0===a&&o.classList.add("basicLightbox--video"),!0===l&&o.classList.add("basicLightbox--iframe"),o}(e=function(e){var t="string"==typeof e,o=e instanceof HTMLElement==1;if(!1===t&&!1===o)throw new Error("Content must be a DOM element/node or string");return!0===t?Array.from(n(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(t)),r=function(e){return!1!==t.onClose(a)&&function(e,t){return e.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===i(e)||e.parentElement.removeChild(e),t()}),410),!0}(o,(function(){if("function"==typeof e)return e(a)}))};!0===t.closable&&o.addEventListener("click",(function(e){e.target===o&&r()}));var a={element:function(){return o},visible:function(){return i(o)},show:function(e){return!1!==t.onShow(a)&&function(e,t){return document.body.appendChild(e),setTimeout((function(){requestAnimationFrame((function(){return e.classList.add("basicLightbox--visible"),t()}))}),10),!0}(o,(function(){if("function"==typeof e)return e(a)}))},close:r};return a}},{}]},{},[1])(1);var y;y=new URL(i("kyEFX").resolve("8bXqy"),import.meta.url).toString();var k;k=new URL(i("kyEFX").resolve("lp5u4"),import.meta.url).toString();var _;_=new URL(i("kyEFX").resolve("jCYVU"),import.meta.url).toString();var L;L=new URL(i("kyEFX").resolve("dm81U"),import.meta.url).toString();var S;S=new URL(i("kyEFX").resolve("h2fYN"),import.meta.url).toString();var E;E=new URL(i("kyEFX").resolve("4EHhF"),import.meta.url).toString();var w;async function O(e){const{book_image:o,title:n,author:s,buy_links:i}=e;e.description||(e.description="Unfortunately, there is no description for this book at the moment."),e.book_image||(e.book_image=t(y));const r=v.create(`\n    <div class="modal-info">\n    <button type="button" class="modal__close-btn">\n    <svg class="modal__close-icon" width="8" height="8">\n      <use href="${t(k)}#icon-close"></use>\n    </svg>\n  </button>\n    <div class="modal-pop__container">\n    <img class="modal__img" src="${o}" alt="${n}" />\n      <div class="modal-info__box">\n        <h2 class="modal-info__title">${n}</h2>\n        <p class="modal-info__author">${s}</p>\n        <p class="modal-info__text">${e.description}</p>\n        <ul class="modal-info__shops">\n          <li>\n            <a class="modal-info__link" href="${i[0].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Amazon">\n              <img src="${t(_)}"\n                srcset="${t(L)} 2x" alt="Amazon shop" width="62" height="19" />\n            </a>\n          </li>\n          <li>\n            <a class="modal-info__link" href="${i[1].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Apple-books">\n              <img src="${t(S)}"\n                srcset="${t(E)} 2x" alt="Apple shop" width="33" height="32" />\n            </a>\n          </li>\n          <li>\n            <a class="modal-info__link" href="${i[4].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Bookshop">\n              <img src="${t(w)}"\n                srcset="${t(w)} 2x" alt="Book shop" width="38" height="36" />\n            </a>\n          </li>\n        </ul>\n      </div>\n</div>\n    <button class="modal__add-btn modal__add-btn-js">\n    add to shopping list\n</button>\n<div class="modal__remove-btn-wrapper visually-hidden">\n    <button class="modal__remove-btn">\n        remove from the shopping list\n    </button>\n    <p class="modal__remove-btn-message">\n        Сongratulations! You have added the book to the shopping list. To\n    delete, press the button “Remove from the shopping list”.\n    </p>\n    </div>\n</div>`,{onShow:()=>{document.addEventListener("keydown",a),document.addEventListener("click",l)},onClose:()=>{document.removeEventListener("click",l),document.removeEventListener("keydown",a)},closable:!1});function a({code:e}){"Escape"===e&&r.close()}function l({target:e}){e.closest(".modal-info")||r.close()}r.show();document.querySelector(".modal__close-btn").addEventListener("click",(function(){r.close()}));const c=document.querySelector(".modal__add-btn"),d=document.querySelector(".modal__remove-btn-wrapper");!function(){const t=JSON.parse(localStorage.getItem("SHOPPING-BOOKS-LIST"));if(t){t.find((t=>t._id===e._id))&&(c.classList.add("visually-hidden"),d.classList.remove("visually-hidden"))}}(),c.addEventListener("click",(function(){!function(e){const t=JSON.parse(localStorage.getItem("SHOPPING-BOOKS-LIST"));if(t){t.find((t=>t._id===e._id))||(t.push(e),localStorage.setItem("SHOPPING-BOOKS-LIST",JSON.stringify(t)))}else localStorage.setItem("SHOPPING-BOOKS-LIST",JSON.stringify([e]))}(e),c.classList.add("visually-hidden"),d.classList.remove("visually-hidden")})),d.addEventListener("click",(function(){!function(e){const t=JSON.parse(localStorage.getItem("SHOPPING-BOOKS-LIST")).filter((t=>t._id!==e._id));0===t.length?localStorage.removeItem("SHOPPING-BOOKS-LIST"):localStorage.setItem("SHOPPING-BOOKS-LIST",JSON.stringify(t))}(e),d.classList.add("visually-hidden"),c.classList.remove("visually-hidden")}))}w=new URL(i("kyEFX").resolve("kptGM"),import.meta.url).toString();const H=document.getElementById("loader-wrapper"),$=window.innerWidth;let I=5;$<1440&&$>=768?I=3:$<768&&(I=1);const T=new p,x=document.querySelector(".books-list"),N=async()=>{H.classList.remove("visually-hidden");const e=await T.getCategoriesTop();H.classList.add("visually-hidden"),x.innerHTML="",e.forEach((e=>{const t=e.books.slice(0,I).map((e=>`  \n        <div class="book-card" data-book-id="${e._id}">\n          <div class="book-card-hover">\n            <img loading="lazy" src="${e.book_image}" alt="${e.title}" class="book-image">\n            <p>quick view</p>\n          </div>\n          <div class="book-info">\n            <h3 class="book-title">${e.title}</h3>\n            <p class="book-autor">${e.author}</p>\n          </div>\n        </div>\n      `)).join(""),o=`\n    <section class="category-section">\n      <h3 class="books-list-title-fo-all-categori">${e.list_name}</h3>\n      <div class="books-container">\n        ${t}\n      </div>\n      <button type=button data-category-books="${e.list_name}" class="category-books-button">SEE MORE</button>\n    </section>`;x.insertAdjacentHTML("beforeend",o)}));x.insertAdjacentHTML("afterbegin",'<h2 class="books-list-title">Best Sellers <span class="span-books-list-title">Books</span></h2>'),x.addEventListener("click",(async e=>{const t=e.target.closest(".book-card");if(t){const e=t.dataset.bookId;O(await T.getBookId(e))}})),x.addEventListener("click",(async e=>{if(e.target.classList.contains("category-books-button")){const t=e.target.dataset.categoryBooks;q(t),F(t)}}))};N();const q=async e=>{H.classList.remove("visually-hidden");const t=await T.getCategoriesSelected(e);H.classList.add("visually-hidden"),x.innerHTML="";const o=e.split(" "),n=o.pop(),s=`\n    <section class="category-section">\n      <h2  class="books-list-title">${o.join(" ")} <span class="span-books-list-title">${n}</span></h2>\n      <div class="books-container">\n        ${t.map((e=>`\n    <div class="book-card book-card-wrapper" data-book-id="${e._id}">\n        <img loading="lazy" src="${e.book_image}" alt="${e.title}" class="book-image">\n        <div class="book-card-hover"><p>quick view</p></div>\n        <div class="book-info">\n          <h3 class="book-title">${e.title}</h3>\n          <p class="book-autor">${e.author}</p>\n        </div>\n    </div>\n    `)).join("")}\n      </div>\n    </section>\n  `;x.insertAdjacentHTML("beforeend",s),window.scrollTo(0,0)},C=new p,A=document.querySelector(".categories-list");function F(e){document.querySelector(".current-category").classList.remove("current-category");const t=document.querySelector(`[data-category-books="${e}"]`);t.classList.add("current-category"),A.scrollTo(0,t.offsetTop-10)}(async()=>{const e=(await C.getCategoriesList()).map((e=>`<li class="categories-item" data-category-books="${e.list_name}">${e.list_name}</li>`)).join("");A.insertAdjacentHTML("beforeend",e);document.querySelector(".categories-list").firstElementChild.addEventListener("click",N),A.addEventListener("click",(function(e){if("LI"!==e.target.nodeName||!e.target.dataset.categoryBooks)return;const t=e.target.dataset.categoryBooks;q(t)}))})(),A.addEventListener("click",(function(e){if("LI"!==e.target.nodeName)return;document.querySelector(".current-category").classList.remove("current-category"),e.target.classList.add("current-category")}));const P=document.getElementById("scrollUpBtn");window.addEventListener("scroll",(function(){const e=window.pageYOffset;P.style.display=e>1e3?"block":"none"})),P.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}));
//# sourceMappingURL=index.327130df.js.map
